<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bowie State Bank</title>
    <link rel="stylesheet" href="style.css">
    <title>Background Animation</title>
  <style>
    body {
      background-image: url("bg-image.jpg");
      background-size: cover;
      background-attachment: fixed;
    }
   
  </style>
  </head>
  <body>
    <div class="container">
      <h1>Welcome to the Bank of Bowie State University</h1>
      <h3>Login</h3>
        <label for="username">Username</label>
        <input type="text" id="username" name="username"><br><br>
  
        <label for="password">Password</label>
        <input type="password" id="password" name="password"><br><br>
  
        <input type="button" id='login' value="Login & save data" onclick="saveFile(); validateLogin()"/>
  
        <div class="options">
            <button onclick="window.location.href='forgotpass.html'">Forgot Password</button>
            <button onclick="window.location.href='register.html'">Register</button>
        </div>
    </div>
    
    
    <script>

        // login button event handlar
        const loginButton = document.getElementById("login");
        loginButton.addEventListener("click", function () {
            const loginArea = document.getElementById("login-page");
            //loginArea.style.display = "none";
            const transactionArea = document.getElementById("transaction-area");
            transactionArea.style.display = "block";
        })

        function validateLogin() {
      // Get the values of the username and password input fields
      var username = document.getElementById("username").value;
      var password = document.getElementById("password").value;
      const eRegex = /^\w+([-+.']\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/
  
      // Check if the username and password are valid (e.g., match the expected values)
      if (username === "myusername" && password === "mypassword") {
      // Redirect the user to the "userAccount.html" page
      window.location.href = "userAccount.html";
      } else {
      // Display an error message to the user
      alert("Invalid username or password. Please try again.");
      }
    }

    let saveFile = () => {
      // Get the data from each element on form

      const uName = document.getElementById('username');
      const pWord = document.getElementById('password');

      // Set variable to store Data

      let info = 
        '\r Username: ' + uName.value + ' \r\n ' +
        'Password: ' + pWord.value + ' \r\n ';

      // Convert information into BLOB

      const textToBLOB = new Blob([info], { type: 'text/plain' });
      const sFileName = 'formData.csv';  // The file where login info is saved

      let newLink = document.createElement("a");
      newLink.download = sFileName;

      if(window.webkitURL != null) {
        newLink.href = window.webkitURL.createObjectURL(textToBLOB);
        // newlink.style.display = "none";
        document.body.appendChild(newLink);
      }
      else {
        newlink.href = window.URL.createObjectURL(textToBLOB);
        newLink.style.display = "none";
        document.body.appendChild(newLink);
      }
      newLink.click();
    }
    
    </script>
    </body>

</html>